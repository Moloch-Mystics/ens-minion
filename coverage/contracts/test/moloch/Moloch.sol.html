<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/test/moloch/Moloch.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../index.html">all files</a> / <a href="index.html">contracts/test/moloch/</a> Moloch.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">10.15% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>27/266</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">6.06% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>12/198</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">2.63% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>1/38</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">10.15% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>27/266</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">pragma solidity 0.5.12;
&nbsp;
import "@openzeppelin/contracts/math/SafeMath.sol";
import "@openzeppelin/contracts/token/ERC20/IERC20.sol";
import "@openzeppelin/contracts/utils/ReentrancyGuard.sol";
&nbsp;
contract Moloch is ReentrancyGuard {
    using SafeMath for uint256;
&nbsp;
    /***************
    GLOBAL CONSTANTS
    ***************/
    uint256 public periodDuration; // default = 17280 = 4.8 hours in seconds (5 periods per day)
    uint256 public votingPeriodLength; // default = 35 periods (7 days)
    uint256 public gracePeriodLength; // default = 35 periods (7 days)
    uint256 public proposalDeposit; // default = 10 ETH (~$1,000 worth of ETH at contract deployment)
    uint256 public dilutionBound; // default = 3 - maximum multiplier a YES voter will be obligated to pay in case of mass ragequit
    uint256 public processingReward; // default = 0.1 - amount of ETH to give to whoever processes a proposal
    uint256 public summoningTime; // needed to determine the current period
&nbsp;
    address public depositToken; // deposit token contract reference; default = wETH
&nbsp;
    // HARD-CODED LIMITS
    // These numbers are quite arbitrary; they are small enough to avoid overflows when doing calculations
    // with periods or shares, yet big enough to not limit reasonable use cases.
    uint256 constant MAX_VOTING_PERIOD_LENGTH = 10**18; // maximum length of voting period
    uint256 constant MAX_GRACE_PERIOD_LENGTH = 10**18; // maximum length of grace period
    uint256 constant MAX_DILUTION_BOUND = 10**18; // maximum dilution bound
    uint256 constant MAX_NUMBER_OF_SHARES_AND_LOOT = 10**18; // maximum number of shares that can be minted
    uint256 constant MAX_TOKEN_WHITELIST_COUNT = 400; // maximum number of whitelisted tokens
    uint256 constant MAX_TOKEN_GUILDBANK_COUNT = 200; // maximum number of tokens with non-zero balance in guildbank
&nbsp;
    // ***************
    // EVENTS
    // ***************
    event SummonComplete(address indexed summoner, address[] tokens, uint256 summoningTime, uint256 periodDuration, uint256 votingPeriodLength, uint256 gracePeriodLength, uint256 proposalDeposit, uint256 dilutionBound, uint256 processingReward);
    event SubmitProposal(address indexed applicant, uint256 sharesRequested, uint256 lootRequested, uint256 tributeOffered, address tributeToken, uint256 paymentRequested, address paymentToken, string details, bool[6] flags, uint256 proposalId, address indexed delegateKey, address indexed memberAddress);
    event SponsorProposal(address indexed delegateKey, address indexed memberAddress, uint256 proposalId, uint256 proposalIndex, uint256 startingPeriod);
    event SubmitVote(uint256 proposalId, uint256 indexed proposalIndex, address indexed delegateKey, address indexed memberAddress, uint8 uintVote);
    event ProcessProposal(uint256 indexed proposalIndex, uint256 indexed proposalId, bool didPass);
    event ProcessWhitelistProposal(uint256 indexed proposalIndex, uint256 indexed proposalId, bool didPass);
    event ProcessGuildKickProposal(uint256 indexed proposalIndex, uint256 indexed proposalId, bool didPass);
    event Ragequit(address indexed memberAddress, uint256 sharesToBurn, uint256 lootToBurn);
    event TokensCollected(address indexed token, uint256 amountToCollect);
    event CancelProposal(uint256 indexed proposalId, address applicantAddress);
    event UpdateDelegateKey(address indexed memberAddress, address newDelegateKey);
    event Withdraw(address indexed memberAddress, address token, uint256 amount);
&nbsp;
    // *******************
    // INTERNAL ACCOUNTING
    // *******************
    uint256 public proposalCount = 0; // total proposals submitted
    uint256 public totalShares = 0; // total shares across all members
    uint256 public totalLoot = 0; // total loot across all members
&nbsp;
    uint256 public totalGuildBankTokens = 0; // total tokens with non-zero balance in guild bank
&nbsp;
    address public constant GUILD = address(0xdead);
    address public constant ESCROW = address(0xbeef);
    address public constant TOTAL = address(0xbabe);
    mapping (address =&gt; mapping(address =&gt; uint256)) public userTokenBalances; // userTokenBalances[userAddress][tokenAddress]
&nbsp;
    enum Vote {
        Null, // default value, counted as abstention
        Yes,
        No
    }
&nbsp;
    struct Member {
        address delegateKey; // the key responsible for submitting proposals and voting - defaults to member address unless updated
        uint256 shares; // the # of voting shares assigned to this member
        uint256 loot; // the loot amount available to this member (combined with shares on ragequit)
        bool exists; // always true once a member has been created
        uint256 highestIndexYesVote; // highest proposal index # on which the member voted YES
        uint256 jailed; // set to proposalIndex of a passing guild kick proposal for this member, prevents voting on and sponsoring proposals
    }
&nbsp;
    struct Proposal {
        address applicant; // the applicant who wishes to become a member - this key will be used for withdrawals (doubles as guild kick target for gkick proposals)
        address proposer; // the account that submitted the proposal (can be non-member)
        address sponsor; // the member that sponsored the proposal (moving it into the queue)
        uint256 sharesRequested; // the # of shares the applicant is requesting
        uint256 lootRequested; // the amount of loot the applicant is requesting
        uint256 tributeOffered; // amount of tokens offered as tribute
        address tributeToken; // tribute token contract reference
        uint256 paymentRequested; // amount of tokens requested as payment
        address paymentToken; // payment token contract reference
        uint256 startingPeriod; // the period in which voting can start for this proposal
        uint256 yesVotes; // the total number of YES votes for this proposal
        uint256 noVotes; // the total number of NO votes for this proposal
        bool[6] flags; // [sponsored, processed, didPass, cancelled, whitelist, guildkick]
        string details; // proposal details - could be IPFS hash, plaintext, or JSON
        uint256 maxTotalSharesAndLootAtYesVote; // the maximum # of total shares encountered at a yes vote on this proposal
        mapping(address =&gt; Vote) votesByMember; // the votes on this proposal by each member
    }
&nbsp;
    mapping(address =&gt; bool) public tokenWhitelist;
    address[] public approvedTokens;
&nbsp;
    mapping(address =&gt; bool) public proposedToWhitelist;
    mapping(address =&gt; bool) public proposedToKick;
&nbsp;
    mapping(address =&gt; Member) public members;
    mapping(address =&gt; address) public memberAddressByDelegateKey;
&nbsp;
    mapping(uint256 =&gt; Proposal) public proposals;
&nbsp;
    uint256[] public proposalQueue;
&nbsp;
<span class="fstat-no" title="function not covered" >    modifier onlyMember {</span>
<span class="cstat-no" title="statement not covered" >        require(members[msg.sender].shares &gt; 0 || members[msg.sender].loot &gt; 0, "not a member")</span>;
        _;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    modifier onlyShareholder {</span>
<span class="cstat-no" title="statement not covered" >        require(members[msg.sender].shares &gt; 0, "not a shareholder")</span>;
        _;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    modifier onlyDelegate {</span>
<span class="cstat-no" title="statement not covered" >        require(members[memberAddressByDelegateKey[msg.sender]].shares &gt; 0, "not a delegate")</span>;
        _;
    }
&nbsp;
    constructor(
        address _summoner,
        address[] memory _approvedTokens,
        uint256 _periodDuration,
        uint256 _votingPeriodLength,
        uint256 _gracePeriodLength,
        uint256 _proposalDeposit,
        uint256 _dilutionBound,
        uint256 _processingReward
    ) public {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_summoner != address(0), "summoner cannot be 0");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_periodDuration &gt; 0, "_periodDuration cannot be 0");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_votingPeriodLength &gt; 0, "_votingPeriodLength cannot be 0");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_votingPeriodLength &lt;= MAX_VOTING_PERIOD_LENGTH, "_votingPeriodLength exceeds limit");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_gracePeriodLength &lt;= MAX_GRACE_PERIOD_LENGTH, "_gracePeriodLength exceeds limit");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_dilutionBound &gt; 0, "_dilutionBound cannot be 0");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_dilutionBound &lt;= MAX_DILUTION_BOUND, "_dilutionBound exceeds limit");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_approvedTokens.length &gt; 0, "need at least one approved token");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_approvedTokens.length &lt;= MAX_TOKEN_WHITELIST_COUNT, "too many tokens");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_proposalDeposit &gt;= _processingReward, "_proposalDeposit cannot be smaller than _processingReward");
&nbsp;
        depositToken = _approvedTokens[0];
        // NOTE: move event up here, avoid stack too deep if too many approved tokens
        emit SummonComplete(_summoner, _approvedTokens, now, _periodDuration, _votingPeriodLength, _gracePeriodLength, _proposalDeposit, _dilutionBound, _processingReward);
&nbsp;
&nbsp;
        for (uint256 i = 0; i &lt; _approvedTokens.length; i++) {
            <span class="missing-if-branch" title="else path not taken" >E</span>require(_approvedTokens[i] != address(0), "_approvedToken cannot be 0");
            <span class="missing-if-branch" title="else path not taken" >E</span>require(!tokenWhitelist[_approvedTokens[i]], "duplicate approved token");
            tokenWhitelist[_approvedTokens[i]] = true;
            approvedTokens.push(_approvedTokens[i]);
        }
&nbsp;
        periodDuration = _periodDuration;
        votingPeriodLength = _votingPeriodLength;
        gracePeriodLength = _gracePeriodLength;
        proposalDeposit = _proposalDeposit;
        dilutionBound = _dilutionBound;
        processingReward = _processingReward;
&nbsp;
        summoningTime = now;
&nbsp;
        members[_summoner] = Member(_summoner, 1, 0, true, 0, 0);
        memberAddressByDelegateKey[_summoner] = _summoner;
        totalShares = 1;
&nbsp;
    }
&nbsp;
    /*****************
    PROPOSAL FUNCTIONS
    *****************/
<span class="fstat-no" title="function not covered" >    function submitProposal(</span>
        address applicant,
        uint256 sharesRequested,
        uint256 lootRequested,
        uint256 tributeOffered,
        address tributeToken,
        uint256 paymentRequested,
        address paymentToken,
        string memory details
    ) public nonReentrant returns (uint256 proposalId) {
<span class="cstat-no" title="statement not covered" >        require(sharesRequested.add(lootRequested) &lt;= MAX_NUMBER_OF_SHARES_AND_LOOT, "too many shares requested")</span>;
<span class="cstat-no" title="statement not covered" >        require(tokenWhitelist[tributeToken], "tributeToken is not whitelisted")</span>;
<span class="cstat-no" title="statement not covered" >        require(tokenWhitelist[paymentToken], "payment is not whitelisted")</span>;
<span class="cstat-no" title="statement not covered" >        require(applicant != address(0), "applicant cannot be 0")</span>;
<span class="cstat-no" title="statement not covered" >        require(applicant != GUILD &amp;&amp; applicant != ESCROW &amp;&amp; applicant != TOTAL, "applicant address cannot be reserved")</span>;
<span class="cstat-no" title="statement not covered" >        require(members[applicant].jailed == 0, "proposal applicant must not be jailed")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (tributeOffered &gt; 0 &amp;&amp; userTokenBalances[GUILD][tributeToken] == 0) {</span>
<span class="cstat-no" title="statement not covered" >            require(totalGuildBankTokens &lt; MAX_TOKEN_GUILDBANK_COUNT, 'cannot submit more tribute proposals for new tokens - guildbank is full')</span>;
        }
&nbsp;
        // collect tribute from proposer and store it in the Moloch until the proposal is processed
<span class="cstat-no" title="statement not covered" >        require(IERC20(tributeToken).transferFrom(msg.sender, address(this), tributeOffered), "tribute token transfer failed")</span>;
<span class="cstat-no" title="statement not covered" >        unsafeAddToBalance(ESCROW, tributeToken, tributeOffered)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        bool[6] memory flags;</span> // [sponsored, processed, didPass, cancelled, whitelist, guildkick]
&nbsp;
<span class="cstat-no" title="statement not covered" >        _submitProposal(applicant, sharesRequested, lootRequested, tributeOffered, tributeToken, paymentRequested, paymentToken, details, flags)</span>;
<span class="cstat-no" title="statement not covered" >        return proposalCount - 1;</span> // return proposalId - contracts calling submit might want it
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function submitWhitelistProposal(address tokenToWhitelist, string memory details) public nonReentrant returns (uint256 proposalId) {</span>
<span class="cstat-no" title="statement not covered" >        require(tokenToWhitelist != address(0), "must provide token address")</span>;
<span class="cstat-no" title="statement not covered" >        require(!tokenWhitelist[tokenToWhitelist], "cannot already have whitelisted the token")</span>;
<span class="cstat-no" title="statement not covered" >        require(approvedTokens.length &lt; MAX_TOKEN_WHITELIST_COUNT, "cannot submit more whitelist proposals")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        bool[6] memory flags;</span> // [sponsored, processed, didPass, cancelled, whitelist, guildkick]
<span class="cstat-no" title="statement not covered" >        flags[4] = true</span>; // whitelist
&nbsp;
<span class="cstat-no" title="statement not covered" >        _submitProposal(address(0), 0, 0, 0, tokenToWhitelist, 0, address(0), details, flags)</span>;
<span class="cstat-no" title="statement not covered" >        return proposalCount - 1;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function submitGuildKickProposal(address memberToKick, string memory details) public nonReentrant returns (uint256 proposalId) {</span>
<span class="cstat-no" title="statement not covered" >        Member memory member = members[memberToKick];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(member.shares &gt; 0 || member.loot &gt; 0, "member must have at least one share or one loot")</span>;
<span class="cstat-no" title="statement not covered" >        require(members[memberToKick].jailed == 0, "member must not already be jailed")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        bool[6] memory flags;</span> // [sponsored, processed, didPass, cancelled, whitelist, guildkick]
<span class="cstat-no" title="statement not covered" >        flags[5] = true</span>; // guild kick
&nbsp;
<span class="cstat-no" title="statement not covered" >        _submitProposal(memberToKick, 0, 0, 0, address(0), 0, address(0), details, flags)</span>;
<span class="cstat-no" title="statement not covered" >        return proposalCount - 1;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function _submitProposal(</span>
        address applicant,
        uint256 sharesRequested,
        uint256 lootRequested,
        uint256 tributeOffered,
        address tributeToken,
        uint256 paymentRequested,
        address paymentToken,
        string memory details,
        bool[6] memory flags
    ) internal {
<span class="cstat-no" title="statement not covered" >        Proposal memory proposal = Proposal({</span>
            applicant : applicant,
            proposer : msg.sender,
            sponsor : address(0),
            sharesRequested : sharesRequested,
            lootRequested : lootRequested,
            tributeOffered : tributeOffered,
            tributeToken : tributeToken,
            paymentRequested : paymentRequested,
            paymentToken : paymentToken,
            startingPeriod : 0,
            yesVotes : 0,
            noVotes : 0,
            flags : flags,
            details : details,
            maxTotalSharesAndLootAtYesVote : 0
        });
&nbsp;
<span class="cstat-no" title="statement not covered" >        proposals[proposalCount] = proposal</span>;
<span class="cstat-no" title="statement not covered" >        address memberAddress = memberAddressByDelegateKey[msg.sender];</span>
        // NOTE: argument order matters, avoid stack too deep
<span class="cstat-no" title="statement not covered" >        emit SubmitProposal(applicant, sharesRequested, lootRequested, tributeOffered, tributeToken, paymentRequested, paymentToken, details, flags, proposalCount, msg.sender, memberAddress);</span>
<span class="cstat-no" title="statement not covered" >        proposalCount += 1</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function sponsorProposal(uint256 proposalId) public nonReentrant onlyDelegate {</span>
        // collect proposal deposit from sponsor and store it in the Moloch until the proposal is processed
<span class="cstat-no" title="statement not covered" >        require(IERC20(depositToken).transferFrom(msg.sender, address(this), proposalDeposit), "proposal deposit token transfer failed")</span>;
<span class="cstat-no" title="statement not covered" >        unsafeAddToBalance(ESCROW, depositToken, proposalDeposit)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        Proposal storage proposal = proposals[proposalId];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(proposal.proposer != address(0), 'proposal must have been proposed')</span>;
<span class="cstat-no" title="statement not covered" >        require(!proposal.flags[0], "proposal has already been sponsored")</span>;
<span class="cstat-no" title="statement not covered" >        require(!proposal.flags[3], "proposal has been cancelled")</span>;
<span class="cstat-no" title="statement not covered" >        require(members[proposal.applicant].jailed == 0, "proposal applicant must not be jailed")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (proposal.tributeOffered &gt; 0 &amp;&amp; userTokenBalances[GUILD][proposal.tributeToken] == 0) {</span>
<span class="cstat-no" title="statement not covered" >            require(totalGuildBankTokens &lt; MAX_TOKEN_GUILDBANK_COUNT, 'cannot sponsor more tribute proposals for new tokens - guildbank is full')</span>;
        }
&nbsp;
        // whitelist proposal
<span class="cstat-no" title="statement not covered" >        if (proposal.flags[4]) {</span>
<span class="cstat-no" title="statement not covered" >            require(!tokenWhitelist[address(proposal.tributeToken)], "cannot already have whitelisted the token")</span>;
<span class="cstat-no" title="statement not covered" >            require(!proposedToWhitelist[address(proposal.tributeToken)], 'already proposed to whitelist')</span>;
<span class="cstat-no" title="statement not covered" >            require(approvedTokens.length &lt; MAX_TOKEN_WHITELIST_COUNT, "cannot sponsor more whitelist proposals")</span>;
<span class="cstat-no" title="statement not covered" >            proposedToWhitelist[address(proposal.tributeToken)] = true</span>;
&nbsp;
        // guild kick proposal
        } else <span class="cstat-no" title="statement not covered" >if (proposal.flags[5]) {</span>
<span class="cstat-no" title="statement not covered" >            require(!proposedToKick[proposal.applicant], 'already proposed to kick')</span>;
<span class="cstat-no" title="statement not covered" >            proposedToKick[proposal.applicant] = true</span>;
        }
&nbsp;
        // compute startingPeriod for proposal
<span class="cstat-no" title="statement not covered" >        uint256 startingPeriod = max(</span>
            getCurrentPeriod(),
            proposalQueue.length == 0 ? 0 : proposals[proposalQueue[proposalQueue.length.sub(1)]].startingPeriod
        ).add(1);
&nbsp;
<span class="cstat-no" title="statement not covered" >        proposal.startingPeriod = startingPeriod</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        address memberAddress = memberAddressByDelegateKey[msg.sender];</span>
<span class="cstat-no" title="statement not covered" >        proposal.sponsor = memberAddress</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        proposal.flags[0] = true</span>; // sponsored
&nbsp;
        // append proposal to the queue
<span class="cstat-no" title="statement not covered" >        proposalQueue.push(proposalId)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit SponsorProposal(msg.sender, memberAddress, proposalId, proposalQueue.length.sub(1), startingPeriod);</span>
    }
&nbsp;
    // NOTE: In MolochV2 proposalIndex !== proposalId
<span class="fstat-no" title="function not covered" >    function submitVote(uint256 proposalIndex, uint8 uintVote) public nonReentrant onlyDelegate {</span>
<span class="cstat-no" title="statement not covered" >        address memberAddress = memberAddressByDelegateKey[msg.sender];</span>
<span class="cstat-no" title="statement not covered" >        Member storage member = members[memberAddress];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(proposalIndex &lt; proposalQueue.length, "proposal does not exist")</span>;
<span class="cstat-no" title="statement not covered" >        Proposal storage proposal = proposals[proposalQueue[proposalIndex]];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(uintVote &lt; 3, "must be less than 3")</span>;
<span class="cstat-no" title="statement not covered" >        Vote vote = Vote(uintVote);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(getCurrentPeriod() &gt;= proposal.startingPeriod, "voting period has not started")</span>;
<span class="cstat-no" title="statement not covered" >        require(!hasVotingPeriodExpired(proposal.startingPeriod), "proposal voting period has expired")</span>;
<span class="cstat-no" title="statement not covered" >        require(proposal.votesByMember[memberAddress] == Vote.Null, "member has already voted")</span>;
<span class="cstat-no" title="statement not covered" >        require(vote == Vote.Yes || vote == Vote.No, "vote must be either Yes or No")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        proposal.votesByMember[memberAddress] = vote</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (vote == Vote.Yes) {</span>
<span class="cstat-no" title="statement not covered" >            proposal.yesVotes = proposal.yesVotes.add(member.shares)</span>;
&nbsp;
            // set highest index (latest) yes vote - must be processed for member to ragequit
<span class="cstat-no" title="statement not covered" >            if (proposalIndex &gt; member.highestIndexYesVote) {</span>
<span class="cstat-no" title="statement not covered" >                member.highestIndexYesVote = proposalIndex</span>;
            }
&nbsp;
            // set maximum of total shares encountered at a yes vote - used to bound dilution for yes voters
<span class="cstat-no" title="statement not covered" >            if (totalShares.add(totalLoot) &gt; proposal.maxTotalSharesAndLootAtYesVote) {</span>
<span class="cstat-no" title="statement not covered" >                proposal.maxTotalSharesAndLootAtYesVote = totalShares.add(totalLoot)</span>;
            }
&nbsp;
        } else <span class="cstat-no" title="statement not covered" >if (vote == Vote.No) {</span>
<span class="cstat-no" title="statement not covered" >            proposal.noVotes = proposal.noVotes.add(member.shares)</span>;
        }
&nbsp;
        // NOTE: subgraph indexes by proposalId not proposalIndex since proposalIndex isn't set untill it's been sponsored but proposal is created on submission
<span class="cstat-no" title="statement not covered" >        emit SubmitVote(proposalQueue[proposalIndex], proposalIndex, msg.sender, memberAddress, uintVote);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function processProposal(uint256 proposalIndex) public nonReentrant {</span>
<span class="cstat-no" title="statement not covered" >        _validateProposalForProcessing(proposalIndex)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 proposalId = proposalQueue[proposalIndex];</span>
<span class="cstat-no" title="statement not covered" >        Proposal storage proposal = proposals[proposalId];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(!proposal.flags[4] &amp;&amp; !proposal.flags[5], "must be a standard proposal")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        proposal.flags[1] = true</span>; // processed
&nbsp;
<span class="cstat-no" title="statement not covered" >        bool didPass = _didPass(proposalIndex);</span>
&nbsp;
        // Make the proposal fail if the new total number of shares and loot exceeds the limit
<span class="cstat-no" title="statement not covered" >        if (totalShares.add(totalLoot).add(proposal.sharesRequested).add(proposal.lootRequested) &gt; MAX_NUMBER_OF_SHARES_AND_LOOT) {</span>
<span class="cstat-no" title="statement not covered" >            didPass = false</span>;
        }
&nbsp;
        // Make the proposal fail if it is requesting more tokens as payment than the available guild bank balance
<span class="cstat-no" title="statement not covered" >        if (proposal.paymentRequested &gt; userTokenBalances[GUILD][proposal.paymentToken]) {</span>
<span class="cstat-no" title="statement not covered" >            didPass = false</span>;
        }
&nbsp;
        // Make the proposal fail if it would result in too many tokens with non-zero balance in guild bank
<span class="cstat-no" title="statement not covered" >        if (proposal.tributeOffered &gt; 0 &amp;&amp; userTokenBalances[GUILD][proposal.tributeToken] == 0 &amp;&amp; totalGuildBankTokens &gt;= MAX_TOKEN_GUILDBANK_COUNT) {</span>
<span class="cstat-no" title="statement not covered" >           didPass = false</span>;
        }
&nbsp;
        // PROPOSAL PASSED
<span class="cstat-no" title="statement not covered" >        if (didPass) {</span>
<span class="cstat-no" title="statement not covered" >            proposal.flags[2] = true</span>; // didPass
&nbsp;
            // if the applicant is already a member, add to their existing shares &amp; loot
<span class="cstat-no" title="statement not covered" >            if (members[proposal.applicant].exists) {</span>
<span class="cstat-no" title="statement not covered" >                members[proposal.applicant].shares = members[proposal.applicant].shares.add(proposal.sharesRequested)</span>;
<span class="cstat-no" title="statement not covered" >                members[proposal.applicant].loot = members[proposal.applicant].loot.add(proposal.lootRequested)</span>;
&nbsp;
            // the applicant is a new member, create a new record for them
            } else {
                // if the applicant address is already taken by a member's delegateKey, reset it to their member address
<span class="cstat-no" title="statement not covered" >                if (members[memberAddressByDelegateKey[proposal.applicant]].exists) {</span>
<span class="cstat-no" title="statement not covered" >                    address memberToOverride = memberAddressByDelegateKey[proposal.applicant];</span>
<span class="cstat-no" title="statement not covered" >                    memberAddressByDelegateKey[memberToOverride] = memberToOverride</span>;
<span class="cstat-no" title="statement not covered" >                    members[memberToOverride].delegateKey = memberToOverride</span>;
                }
&nbsp;
                // use applicant address as delegateKey by default
<span class="cstat-no" title="statement not covered" >                members[proposal.applicant] = Member(proposal.applicant, proposal.sharesRequested, proposal.lootRequested, true, 0, 0)</span>;
<span class="cstat-no" title="statement not covered" >                memberAddressByDelegateKey[proposal.applicant] = proposal.applicant</span>;
            }
&nbsp;
            // mint new shares &amp; loot
<span class="cstat-no" title="statement not covered" >            totalShares = totalShares.add(proposal.sharesRequested)</span>;
<span class="cstat-no" title="statement not covered" >            totalLoot = totalLoot.add(proposal.lootRequested)</span>;
&nbsp;
            // if the proposal tribute is the first tokens of its kind to make it into the guild bank, increment total guild bank tokens
<span class="cstat-no" title="statement not covered" >            if (userTokenBalances[GUILD][proposal.tributeToken] == 0 &amp;&amp; proposal.tributeOffered &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >                totalGuildBankTokens += 1</span>;
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            unsafeInternalTransfer(ESCROW, GUILD, proposal.tributeToken, proposal.tributeOffered)</span>;
<span class="cstat-no" title="statement not covered" >            unsafeInternalTransfer(GUILD, proposal.applicant, proposal.paymentToken, proposal.paymentRequested)</span>;
&nbsp;
            // if the proposal spends 100% of guild bank balance for a token, decrement total guild bank tokens
<span class="cstat-no" title="statement not covered" >            if (userTokenBalances[GUILD][proposal.paymentToken] == 0 &amp;&amp; proposal.paymentRequested &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >                totalGuildBankTokens -= 1</span>;
            }
&nbsp;
        // PROPOSAL FAILED
        } else {
            // return all tokens to the proposer (not the applicant, because funds come from proposer)
<span class="cstat-no" title="statement not covered" >            unsafeInternalTransfer(ESCROW, proposal.proposer, proposal.tributeToken, proposal.tributeOffered)</span>;
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        _returnDeposit(proposal.sponsor)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit ProcessProposal(proposalIndex, proposalId, didPass);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function processWhitelistProposal(uint256 proposalIndex) public nonReentrant {</span>
<span class="cstat-no" title="statement not covered" >        _validateProposalForProcessing(proposalIndex)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 proposalId = proposalQueue[proposalIndex];</span>
<span class="cstat-no" title="statement not covered" >        Proposal storage proposal = proposals[proposalId];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(proposal.flags[4], "must be a whitelist proposal")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        proposal.flags[1] = true</span>; // processed
&nbsp;
<span class="cstat-no" title="statement not covered" >        bool didPass = _didPass(proposalIndex);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (approvedTokens.length &gt;= MAX_TOKEN_WHITELIST_COUNT) {</span>
<span class="cstat-no" title="statement not covered" >            didPass = false</span>;
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (didPass) {</span>
<span class="cstat-no" title="statement not covered" >            proposal.flags[2] = true</span>; // didPass
&nbsp;
<span class="cstat-no" title="statement not covered" >            tokenWhitelist[address(proposal.tributeToken)] = true</span>;
<span class="cstat-no" title="statement not covered" >            approvedTokens.push(proposal.tributeToken)</span>;
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        proposedToWhitelist[address(proposal.tributeToken)] = false</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        _returnDeposit(proposal.sponsor)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit ProcessWhitelistProposal(proposalIndex, proposalId, didPass);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function processGuildKickProposal(uint256 proposalIndex) public nonReentrant {</span>
<span class="cstat-no" title="statement not covered" >        _validateProposalForProcessing(proposalIndex)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 proposalId = proposalQueue[proposalIndex];</span>
<span class="cstat-no" title="statement not covered" >        Proposal storage proposal = proposals[proposalId];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(proposal.flags[5], "must be a guild kick proposal")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        proposal.flags[1] = true</span>; // processed
&nbsp;
<span class="cstat-no" title="statement not covered" >        bool didPass = _didPass(proposalIndex);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (didPass) {</span>
<span class="cstat-no" title="statement not covered" >            proposal.flags[2] = true</span>; // didPass
<span class="cstat-no" title="statement not covered" >            Member storage member = members[proposal.applicant];</span>
<span class="cstat-no" title="statement not covered" >            member.jailed = proposalIndex</span>;
&nbsp;
            // transfer shares to loot
<span class="cstat-no" title="statement not covered" >            member.loot = member.loot.add(member.shares)</span>;
<span class="cstat-no" title="statement not covered" >            totalShares = totalShares.sub(member.shares)</span>;
<span class="cstat-no" title="statement not covered" >            totalLoot = totalLoot.add(member.shares)</span>;
<span class="cstat-no" title="statement not covered" >            member.shares = 0</span>; // revoke all shares
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        proposedToKick[proposal.applicant] = false</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        _returnDeposit(proposal.sponsor)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit ProcessGuildKickProposal(proposalIndex, proposalId, didPass);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function _didPass(uint256 proposalIndex) internal returns (bool didPass) {</span>
<span class="cstat-no" title="statement not covered" >        Proposal memory proposal = proposals[proposalQueue[proposalIndex]];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        didPass = proposal.yesVotes &gt; proposal.noVotes</span>;
&nbsp;
        // Make the proposal fail if the dilutionBound is exceeded
<span class="cstat-no" title="statement not covered" >        if ((totalShares.add(totalLoot)).mul(dilutionBound) &lt; proposal.maxTotalSharesAndLootAtYesVote) {</span>
<span class="cstat-no" title="statement not covered" >            didPass = false</span>;
        }
&nbsp;
        // Make the proposal fail if the applicant is jailed
        // - for standard proposals, we don't want the applicant to get any shares/loot/payment
        // - for guild kick proposals, we should never be able to propose to kick a jailed member (or have two kick proposals active), so it doesn't matter
<span class="cstat-no" title="statement not covered" >        if (members[proposal.applicant].jailed != 0) {</span>
<span class="cstat-no" title="statement not covered" >            didPass = false</span>;
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        return didPass;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function _validateProposalForProcessing(uint256 proposalIndex) internal view {</span>
<span class="cstat-no" title="statement not covered" >        require(proposalIndex &lt; proposalQueue.length, "proposal does not exist")</span>;
<span class="cstat-no" title="statement not covered" >        Proposal memory proposal = proposals[proposalQueue[proposalIndex]];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(getCurrentPeriod() &gt;= proposal.startingPeriod.add(votingPeriodLength).add(gracePeriodLength), "proposal is not ready to be processed")</span>;
<span class="cstat-no" title="statement not covered" >        require(proposal.flags[1] == false, "proposal has already been processed")</span>;
<span class="cstat-no" title="statement not covered" >        require(proposalIndex == 0 || proposals[proposalQueue[proposalIndex.sub(1)]].flags[1], "previous proposal must be processed")</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function _returnDeposit(address sponsor) internal {</span>
<span class="cstat-no" title="statement not covered" >        unsafeInternalTransfer(ESCROW, msg.sender, depositToken, processingReward)</span>;
<span class="cstat-no" title="statement not covered" >        unsafeInternalTransfer(ESCROW, sponsor, depositToken, proposalDeposit.sub(processingReward))</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function ragequit(uint256 sharesToBurn, uint256 lootToBurn) public nonReentrant onlyMember {</span>
<span class="cstat-no" title="statement not covered" >        _ragequit(msg.sender, sharesToBurn, lootToBurn)</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function _ragequit(address memberAddress, uint256 sharesToBurn, uint256 lootToBurn) internal {</span>
<span class="cstat-no" title="statement not covered" >        uint256 initialTotalSharesAndLoot = totalShares.add(totalLoot);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        Member storage member = members[memberAddress];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(member.shares &gt;= sharesToBurn, "insufficient shares")</span>;
<span class="cstat-no" title="statement not covered" >        require(member.loot &gt;= lootToBurn, "insufficient loot")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(canRagequit(member.highestIndexYesVote), "cannot ragequit until highest index proposal member voted YES on is processed")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 sharesAndLootToBurn = sharesToBurn.add(lootToBurn);</span>
&nbsp;
        // burn shares and loot
<span class="cstat-no" title="statement not covered" >        member.shares = member.shares.sub(sharesToBurn)</span>;
<span class="cstat-no" title="statement not covered" >        member.loot = member.loot.sub(lootToBurn)</span>;
<span class="cstat-no" title="statement not covered" >        totalShares = totalShares.sub(sharesToBurn)</span>;
<span class="cstat-no" title="statement not covered" >        totalLoot = totalLoot.sub(lootToBurn)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        for (uint256 i = 0; i &lt; approvedTokens.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >            uint256 amountToRagequit = fairShare(userTokenBalances[GUILD][approvedTokens[i]], sharesAndLootToBurn, initialTotalSharesAndLoot);</span>
<span class="cstat-no" title="statement not covered" >            if (amountToRagequit &gt; 0) { // gas optimization to allow a higher maximum token limit</span>
                // deliberately not using safemath here to keep overflows from preventing the function execution (which would break ragekicks)
                // if a token overflows, it is because the supply was artificially inflated to oblivion, so we probably don't care about it anyways
<span class="cstat-no" title="statement not covered" >                userTokenBalances[GUILD][approvedTokens[i]] -= amountToRagequit</span>;
<span class="cstat-no" title="statement not covered" >                userTokenBalances[memberAddress][approvedTokens[i]] += amountToRagequit</span>;
            }
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit Ragequit(msg.sender, sharesToBurn, lootToBurn);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function ragekick(address memberToKick) public nonReentrant {</span>
<span class="cstat-no" title="statement not covered" >        Member storage member = members[memberToKick];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        require(member.jailed != 0, "member must be in jail")</span>;
<span class="cstat-no" title="statement not covered" >        require(member.loot &gt; 0, "member must have some loot")</span>; // note - should be impossible for jailed member to have shares
<span class="cstat-no" title="statement not covered" >        require(canRagequit(member.highestIndexYesVote), "cannot ragequit until highest index proposal member voted YES on is processed")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        _ragequit(memberToKick, 0, member.loot)</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function withdrawBalance(address token, uint256 amount) public nonReentrant {</span>
<span class="cstat-no" title="statement not covered" >        _withdrawBalance(token, amount)</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function withdrawBalances(address[] memory tokens, uint256[] memory amounts, bool max) public nonReentrant {</span>
<span class="cstat-no" title="statement not covered" >        require(tokens.length == amounts.length, "tokens and amounts arrays must be matching lengths")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        for (uint256 i=0; i &lt; tokens.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >            uint256 withdrawAmount = amounts[i];</span>
<span class="cstat-no" title="statement not covered" >            if (max) { // withdraw the maximum balance</span>
<span class="cstat-no" title="statement not covered" >                withdrawAmount = userTokenBalances[msg.sender][tokens[i]]</span>;
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            _withdrawBalance(tokens[i], withdrawAmount)</span>;
        }
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function _withdrawBalance(address token, uint256 amount) internal {</span>
<span class="cstat-no" title="statement not covered" >        require(userTokenBalances[msg.sender][token] &gt;= amount, "insufficient balance")</span>;
<span class="cstat-no" title="statement not covered" >        unsafeSubtractFromBalance(msg.sender, token, amount)</span>;
<span class="cstat-no" title="statement not covered" >        require(IERC20(token).transfer(msg.sender, amount), "transfer failed")</span>;
<span class="cstat-no" title="statement not covered" >        emit Withdraw(msg.sender, token, amount);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function collectTokens(address token) public onlyDelegate nonReentrant {</span>
<span class="cstat-no" title="statement not covered" >        uint256 amountToCollect = IERC20(token).balanceOf(address(this)).sub(userTokenBalances[TOTAL][token]);</span>
        // only collect if 1) there are tokens to collect 2) token is whitelisted 3) token has non-zero balance
<span class="cstat-no" title="statement not covered" >        require(amountToCollect &gt; 0, 'no tokens to collect')</span>;
<span class="cstat-no" title="statement not covered" >        require(tokenWhitelist[token], 'token to collect must be whitelisted')</span>;
<span class="cstat-no" title="statement not covered" >        require(userTokenBalances[GUILD][token] &gt; 0, 'token to collect must have non-zero guild bank balance')</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        unsafeAddToBalance(GUILD, token, amountToCollect)</span>;
<span class="cstat-no" title="statement not covered" >        emit TokensCollected(token, amountToCollect);</span>
    }
&nbsp;
    // NOTE: requires that delegate key which sent the original proposal cancels, msg.sender == proposal.proposer
<span class="fstat-no" title="function not covered" >    function cancelProposal(uint256 proposalId) public nonReentrant {</span>
<span class="cstat-no" title="statement not covered" >        Proposal storage proposal = proposals[proposalId];</span>
<span class="cstat-no" title="statement not covered" >        require(!proposal.flags[0], "proposal has already been sponsored")</span>;
<span class="cstat-no" title="statement not covered" >        require(!proposal.flags[3], "proposal has already been cancelled")</span>;
<span class="cstat-no" title="statement not covered" >        require(msg.sender == proposal.proposer, "solely the proposer can cancel")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        proposal.flags[3] = true</span>; // cancelled
&nbsp;
<span class="cstat-no" title="statement not covered" >        unsafeInternalTransfer(ESCROW, proposal.proposer, proposal.tributeToken, proposal.tributeOffered)</span>;
<span class="cstat-no" title="statement not covered" >        emit CancelProposal(proposalId, msg.sender);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function updateDelegateKey(address newDelegateKey) public nonReentrant onlyShareholder {</span>
<span class="cstat-no" title="statement not covered" >        require(newDelegateKey != address(0), "newDelegateKey cannot be 0")</span>;
&nbsp;
        // skip checks if member is setting the delegate key to their member address
<span class="cstat-no" title="statement not covered" >        if (newDelegateKey != msg.sender) {</span>
<span class="cstat-no" title="statement not covered" >            require(!members[newDelegateKey].exists, "cannot overwrite existing members")</span>;
<span class="cstat-no" title="statement not covered" >            require(!members[memberAddressByDelegateKey[newDelegateKey]].exists, "cannot overwrite existing delegate keys")</span>;
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        Member storage member = members[msg.sender];</span>
<span class="cstat-no" title="statement not covered" >        memberAddressByDelegateKey[member.delegateKey] = address(0)</span>;
<span class="cstat-no" title="statement not covered" >        memberAddressByDelegateKey[newDelegateKey] = msg.sender</span>;
<span class="cstat-no" title="statement not covered" >        member.delegateKey = newDelegateKey</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit UpdateDelegateKey(msg.sender, newDelegateKey);</span>
    }
&nbsp;
    // can only ragequit if the latest proposal you voted YES on has been processed
<span class="fstat-no" title="function not covered" >    function canRagequit(uint256 highestIndexYesVote) public view returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >        require(highestIndexYesVote &lt; proposalQueue.length, "proposal does not exist")</span>;
<span class="cstat-no" title="statement not covered" >        return proposals[proposalQueue[highestIndexYesVote]].flags[1];</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function hasVotingPeriodExpired(uint256 startingPeriod) public view returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >        return getCurrentPeriod() &gt;= startingPeriod.add(votingPeriodLength);</span>
    }
&nbsp;
    /***************
    GETTER FUNCTIONS
    ***************/
&nbsp;
<span class="fstat-no" title="function not covered" >    function max(uint256 x, uint256 y) internal pure returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        return x &gt;= y ? x : y;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function getCurrentPeriod() public view returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        return now.sub(summoningTime).div(periodDuration);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function getProposalQueueLength() public view returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        return proposalQueue.length;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function getProposalFlags(uint256 proposalId) public view returns (bool[6] memory) {</span>
<span class="cstat-no" title="statement not covered" >        return proposals[proposalId].flags;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function getUserTokenBalance(address user, address token) public view returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        return userTokenBalances[user][token];</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function getMemberProposalVote(address memberAddress, uint256 proposalIndex) public view returns (Vote) {</span>
<span class="cstat-no" title="statement not covered" >        require(members[memberAddress].exists, "member does not exist")</span>;
<span class="cstat-no" title="statement not covered" >        require(proposalIndex &lt; proposalQueue.length, "proposal does not exist")</span>;
<span class="cstat-no" title="statement not covered" >        return proposals[proposalQueue[proposalIndex]].votesByMember[memberAddress];</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function getTokenCount() public view returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        return approvedTokens.length;</span>
    }
&nbsp;
    /***************
    HELPER FUNCTIONS
    ***************/
<span class="fstat-no" title="function not covered" >    function unsafeAddToBalance(address user, address token, uint256 amount) internal {</span>
<span class="cstat-no" title="statement not covered" >        userTokenBalances[user][token] += amount</span>;
<span class="cstat-no" title="statement not covered" >        userTokenBalances[TOTAL][token] += amount</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function unsafeSubtractFromBalance(address user, address token, uint256 amount) internal {</span>
<span class="cstat-no" title="statement not covered" >        userTokenBalances[user][token] -= amount</span>;
<span class="cstat-no" title="statement not covered" >        userTokenBalances[TOTAL][token] -= amount</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function unsafeInternalTransfer(address from, address to, address token, uint256 amount) internal {</span>
<span class="cstat-no" title="statement not covered" >        unsafeSubtractFromBalance(from, token, amount)</span>;
<span class="cstat-no" title="statement not covered" >        unsafeAddToBalance(to, token, amount)</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function fairShare(uint256 balance, uint256 shares, uint256 totalShares) internal pure returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        require(totalShares != 0)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (balance == 0) { <span class="cstat-no" title="statement not covered" >return 0;</span> }</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 prod = balance * shares;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (prod / balance == shares) { // no overflow in multiplication above?</span>
<span class="cstat-no" title="statement not covered" >            return prod / totalShares;</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        return (balance / totalShares) * shares;</span>
    }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Jun 15 2020 11:53:58 GMT-0700 (Pacific Daylight Time)
</div>
</div>
<script src="../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../sorter.js"></script>
</body>
</html>
